---
title: "assets-esbuild"
---

{% alertBlock "warning" %}
Note: The options API is still evolving; expect tweaks as the project grows.
{% endalertBlock %}

## What it does
- Adds `js` as a template format and processes any `index.js` under the resolved assets `js` directory (from your Eleventy `dir.assets`).
- Bundles with esbuild (target `es2020`), minifies, and outputs JS.
- Skips `11tydata.js` files and other JS outside the assets entry.
- Overrides the default `all` collection to exclude `11tydata.js`.
- Registers a filter `inlineESbuild` to inline and bundle arbitrary JS files.

### Defaults
- Entries: any `index.js` file under `<input>/<assets>/js/` (including nested folders).
- Bundle/minify with esbuild, target `es2020`.
- No custom options yet (inherits global Baseline `verbose` for logging).

### How it works
- Registers `js` format and an extension handler that runs for `index.js` under the resolved assets `js` directory.
- Runs esbuild with `{ bundle: true, minify: true, write: false }`, returns compiled text.
- Replaces the default `all` collection with one that filters out `11tydata.js`.

### Inlining a bundle
- Any JS file can be inlined with `inlineESbuild`; the filter bundles the exact file you pass.
- In a template or Markdown file, build the path (e.g., from `_baseline.assets.assetsInput`) and pipe it through `inlineESbuild`.  
- In Markdown, keep the call unindented and on its own lines so the `<script>` is treated as raw HTML.

Example:
```njk
{% raw %}{% set assetsUrl = _baseline.assets.assetsInput ~ "js/inline-example.js" %}{% endraw %}
{% raw %}{{ assetsUrl | inlineESbuild | safe}}{% endraw %}
```

### Tips
- Any nested `index.js` under the assets `js` directory will be bundled; keep only the entries you intend to ship.
- Pair with `inlineESbuild` filter if you want to inline the bundled output in templates.
- If you need multiple entry points or config overrides, youâ€™ll extend this module (options to come).

{% set assetsUrl = _baseline.assets.assetsInput ~ "js/inline-example.js" %}

{{ assetsUrl | inlineESbuild | safe}}
