---
title: "multilang-core"
---

{% alertBlock "warning" %}
Note: The options API is still evolving; expect tweaks as the project grows.
{% endalertBlock %}

## What it does
- Adds Eleventy’s built-in `I18nPlugin` so locale-aware URLs and filters are available.
- Builds a `collections.translations` map keyed by `translationKey` with per-language entries.
- Lets you link alternates (hreflang) and look up localized counterparts in templates.

## Defaults
- `defaultLanguage`: `"en"` if not provided.
- `errorMode`: `"allow-fallback"` (Eleventy I18n option).

## Options (when adding the plugin)
- `defaultLanguage` (string, recommended): Primary locale used for fallbacks.
- `languages` (array or object, optional): Your language definitions; used to decide if multilingual is on and to pass to sitemap-core. Not passed to Eleventy’s I18n plugin.

## How it works
- Registers Eleventy’s `I18nPlugin` with the provided `defaultLanguage` and `errorMode`.
- Creates `collections.translations`:
  - Keyed by each page’s `translationKey`.
  - Each key contains an object keyed by language code: `{ title, url, lang, isDefault, data }`.
  - `lang` is resolved from `page.data.lang` → `page.data.language` → `defaultLanguage`.
- You can render alternate links in Nunjucks, e.g.:
  ```njk
  {% raw %}{% set t = collections.translations[page.translationKey] or {} %}
  {% set defaultLang = site.defaultLanguage %}
  {% set currentLang = page.lang or defaultLang %}
  {% if t[currentLang] %}<link rel="alternate" hreflang="{{ currentLang }}" href="{{ t[currentLang].url | url }}">{% endif %}
  {% for lang, entry in t %}{% if lang != currentLang %}<link rel="alternate" hreflang="{{ lang }}" href="{{ entry.url | url }}">{% endif %}{% endfor %}
  {% if t[defaultLang] %}<link rel="alternate" hreflang="x-default" href="{{ t[defaultLang].url | url }}">{% endif %}{% endraw %}
  ```

## Tips
- Every localized page should set both `translationKey` and `lang` in front matter.
- Keep your default-language page present; it powers the `x-default` alternate.
- Store user-facing labels by language in a map (e.g., `{ en: "Hello", nl: "Hallo" }`) for simple inline translations in Nunjucks.
- If `multilingual: true` and a `languages` map is set, `sitemap-core` will emit a sitemap index and per-locale sitemaps.

