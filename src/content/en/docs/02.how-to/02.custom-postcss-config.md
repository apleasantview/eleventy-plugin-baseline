---
title: "Custom PostCSS Config"
---

Provide your own `postcss.config.js` to override Baseline’s fallback. Keep cssnano for production only, add or remove plugins as needed, and verify the output.

## Prerequisites
- Baseline installed and loaded; assets pipeline enabled.
- `src/assets/css/index.css` exists as the entry.
- `package.json` with `"type": "module"` and scripts (`dev`, `build`).

## Steps

<div class="c-docs-steps">

1. Install PostCSS and the plugins you plan to use:

   ```bash
   npm install postcss postcss-import postcss-preset-env cssnano postcss-mixins
   ```
   Baseline ships fallback plugins, but when you provide your own `postcss.config.js`, bring the plugins as explicit dependencies.

2. Add `postcss.config.js` at the project root:

   ```js
   import postcssImport from "postcss-import";
   import postcssMixins from "postcss-mixins";
   import postcssPresetEnv from "postcss-preset-env";
   import cssnano from "cssnano";

   const isProd = process.env.ELEVENTY_ENV === "production";

   const plugins = [
     postcssImport(),
     postcssMixins(),
     postcssPresetEnv({ stage: 1 }),
   ];

   if (isProd) {
     plugins.push(cssnano({ preset: "default" }));
   }

   /** @type {import('postcss-load-config').Config} */
   export default {
     map: isProd ? false : { inline: true },
     plugins
   };
   ```

3. Exercise the config in your CSS (imports and mixins):

   ```css
   /* src/assets/css/base.css */
   body {
     margin: 0;
     font-family: system-ui, sans-serif;
     color: #0f172a;
     background: #f8fafc;
   }

   @define-mixin linksMixin {
     color: #0f172a;
     text-decoration: underline;
     text-decoration-color: #fc35b9;
     text-decoration-thickness: 2px;
     text-underline-offset: 3px;
     font-weight: 600;
   }

   /* src/assets/css/links.css */
   a {
     @mixin linksMixin;
   }

   a:hover {
    color: #fc35b9;
   }

   /* src/assets/css/index.css */
   @import "./base.css";
   @import "./links.css";
   ```

5. Run and inspect
   - Dev: `npx rimraf dist && npm run dev`
   - Build: `npx rimraf dist && npm run build`
   - Check `dist/assets/css/index.css`:
     - Dev: expanded CSS with mapped imports; no minification.
     - Prod: minified (cssnano), imports flattened, custom media resolved.

</div>

## Notes
- Your `postcss.config.js` fully overrides Baseline’s fallback. Keep the entry file at `src/assets/css/index.css`; add partials via imports.
- Add/remove plugins as needed (e.g., purge/RTL/lightningcss). Use env guards to keep dev output readable and prod output optimized.

