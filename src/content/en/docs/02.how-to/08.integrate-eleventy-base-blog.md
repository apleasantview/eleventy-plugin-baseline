---
title: "Integrate Baseline with Eleventy Base Blog"
slug: "integrate-baseline-with-eleventy-base-blog"
description: "Integrate @apleasantview/eleventy-plugin-baseline into eleventy-base-blog: install, wire config, align data and assets, verify head/meta and sitemap."
---

Add Baseline to the official `eleventy-base-blog` starter with minimal changes: install the plugin, wire it into `eleventy.config.js`, add the required data files, align assets, and verify head/meta and sitemap.

## Prerequisites
- You have `eleventy-base-blog` cloned and running (`npm install`, `npm run dev` works).
- Eleventy v3.x; `package.json` has `dev` and `build` scripts.
- `site.url` will be set via env (`URL`) for production.

## Steps

<div class="c-docs-steps">

1. Install Baseline.

   ```bash
   npm install @apleasantview/eleventy-plugin-baseline
   ```

2. Add Baseline to `eleventy.config.js`.

   Keep existing config and add the Baseline plugin last. Remove the HtmlBasePlugin import and call, keep other imports:

   ```js
   import baseline, { config as baselineConfig } from "@apleasantview/eleventy-plugin-baseline";
   // Existing imports (HtmlBasePlugin removed)

   export default function (eleventyConfig) {
     // Existing config stays; update passthrough/watch as needed.

     eleventyConfig.addPlugin(baseline({
       // enableNavigatorTemplate: false,
       // enableSitemapTemplate: true,
     }));

     // Keep posts clean of 11tydata.js entries (Baseline plugin side effect).
     eleventyConfig.addCollection("posts", function (collectionApi) {
       return collectionApi.getFilteredByTag("posts").filter(item => {
         return !item.inputPath.endsWith("11tydata.js");
       });
     });
   }

   export const config = baselineConfig; // spread to override if needed
   ```

   Add a local `.env` for development so `ELEVENTY_ENV` and `process.env.URL` are set:

   ```
   ELEVENTY_ENV="development"
   URL="http://localhost:8080"
   ```

   In CI/production, set `URL` to your live origin (e.g., `https://example.com`); Baseline uses it for canonical URLs and sitemap.

3. Move Eleventy folders under `src/`.

   In the base blog, move these into `src/` (matching Baseline’s defaults):
   - `_data` → `src/_data`
   - `_includes` → `src/_includes`
   - `content` → `src/content`
   - `css` → `src/assets/css`
   - `public` → `src/public`

   Ensure your layouts and includes resolve from `src/_includes`, and content lives under `src/content/`. You can now delete the `sitemap.xml.njk` template in `src/content/`.

4. Add required data files.

   `src/_data/site.js`:
   ```js
   export default {
     title: "Eleventy Base Blog",
     tagline: "Baseline + Eleventy Base Blog",
     url: process.env.URL || "http://localhost:8080",
     defaultLanguage: "en",
     noindex: false
   };
   ```

   `src/_data/head.js`:
   ```js
   export default {
     link: [{ rel: "stylesheet", href: "/assets/css/index.css" }],
     script: [{ src: "/assets/js/index.js", defer: true }]
   };
   ```

5. Align assets.

   Ensure these exist (or create minimal stubs):
   - `src/assets/css/index.css` — import your base CSS or start empty.
   - `src/assets/js/index.js` — optional JS entry; can be empty.
   - `src/assets/assets.11tydata.js` to keep assets out of collections:
   ```js
   export default {
     eleventyExcludeFromCollections: true
   };
   ```

6. Add `<baseline-head>` to `base.njk`.

   Insert `<baseline-head>` in `<head>`, keep the feed link and the `@zachleat/heading-anchors` module:

   {% raw %}
   ```njk
   <head>
     <baseline-head></baseline-head>
     <link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="{{ metadata.title }}">
     <style>{% getBundle "css" %}</style>
     <script type="module">{% include "node_modules/@zachleat/heading-anchors/heading-anchors.js" %}</script>
   </head>
   ```
   {% endraw %}

7. Set the homepage permalink.

   In `src/content/index.njk`, set:

   {% raw %}
   ```njk
   ---js
   const permalink = "/";
   ---
   ```
   {% endraw %}

8. Inline CSS includes with the Baseline PostCSS filter.

   Replace direct CSS includes in `src/_includes/layouts/post.njk` and `src/_includes/layouts/home.njk` with the inline PostCSS filter. Example:

   {% raw %}
   ```njk
   {% set cssPath = _baseline.assets.input ~ "css/message-box.css" %}
   {{ cssPath | inlinePostCSS | safe }}
   ```
   {% endraw %}

9. Verify head/meta and sitemap.
   - Dev: `npx rimraf dist/ && npm run dev`
   - Build: `npx rimraf dist/ && npm run build`
   - Check a page’s `<head>` for canonical/OG/Twitter shells (Baseline).
   - Inspect `dist/sitemap.xml` for correct URLs (uses `site.url` and `pathPrefix` if set).

10. Optional: navigator/debug.
   - Enable `enableNavigatorTemplate: true` if you want the navigator page (dev only).
   - Use filters `_inspect`, `_json`, `_keys` on a debug page to inspect data.

</div>

## Next steps
- Organize content by moving standalone pages into `src/content/pages/` and set explicit permalinks for each.

## Notes
- Keep `site.url` origin-only; use `pathPrefix` if you deploy under a subpath.
- Baseline assets pipeline uses `src/assets/css/index.css` and `src/assets/js/index.js` as entrypoints.
- If you have existing CSS/JS paths, point `head.js` and your layout links/scripts to the Baseline paths or mirror the files.

