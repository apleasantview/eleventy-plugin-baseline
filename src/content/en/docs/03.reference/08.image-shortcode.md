---
title: "Image shortcode"
slug: "image-shortcode"
description: "Baseline image shortcode built on @11ty/eleventy-img: responsive <picture>, multiple formats, captions, and on-request transforms in dev."
draft: true
eleventyExcludeFromCollections: true
---

Baseline ships an `image` shortcode that wraps `@11ty/eleventy-img` to generate responsive `<picture>` markup.

## What it does
- Generates multiple formats and widths, returns `<picture>` + `<img>`; wraps in `<figure>` when a caption is provided.
- Uses on-request transforms during `ELEVENTY_RUN_MODE=serve` (via `transformOnRequest`).
- Adds `eleventy:ignore` when `eleventyImageTransformPlugin` is present to avoid double-processing.

## Required
- `src` (local or remote) and `alt` (empty string allowed for decorative images).

## Defaults
- Widths: `320, 640, 960, 1280`
- Formats: `avif, webp, jpeg` (order matters)
- Sizes: `(max-width: 768px) 100vw, 768px`
- Output: `outputDir: "./dist/media/"`, `urlPath: "/media/"`
- Caption off unless `caption` is set; when set, wraps in `<figure>`.
- Adds `width`/`height` unless `setDimensions: false`.

## Common options
- `caption`, `loading` (`lazy`/`eager`), `containerClass`, `imageClass`
- `widths`, `formats`, `sizes`
- `outputDir`, `urlPath`
- `attrs`: extra attributes on `<img>`; `class` merges with `imageClass`
- `figure` (default true when caption is provided), `setDimensions`

## Usage
{% raw %}
```njk
{% image {
  src: "/media/mountains.jpg",
  alt: "Mountains at sunset",
  caption: "Responsive image via Baseline",
  widths: [320, 640, 960],
  formats: ["avif", "webp", "jpeg"]
} %}
```
{% endraw %}

## Notes
- Keep `site.url` set so generated URLs are correct when published.
- If you use the HTML Image Transform plugin, Baseline still provides the shortcode; the transform focuses on rewriting existing `<img>` in content. Use whichever fits the page.
